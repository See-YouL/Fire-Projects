\chapter{GPIO输出-\/使用固件库点亮\+LED}
\hypertarget{md__r_e_a_d_m_e}{}\label{md__r_e_a_d_m_e}\index{GPIO输出-\/使用固件库点亮LED@{GPIO输出-\/使用固件库点亮LED}}
\label{md__r_e_a_d_m_e_autotoc_md0}%
\Hypertarget{md__r_e_a_d_m_e_autotoc_md0}%
 项目地址\+: {\bfseries{12-\/GPIO输出-\/使用固件库点亮\+LED}}\hypertarget{md__r_e_a_d_m_e_autotoc_md1}{}\doxysection{\texorpdfstring{RGB原理图}{RGB原理图}}\label{md__r_e_a_d_m_e_autotoc_md1}



\begin{DoxyItemize}
\item IO口低电平点亮
\item 红\+PB5, 绿\+PB0, 蓝\+PB1
\end{DoxyItemize}

在\+User目录下新建led文件夹，添加bsp\+\_\+led.\+c和bsp\+\_\+led.\+h\hypertarget{md__r_e_a_d_m_e_autotoc_md2}{}\doxysection{\texorpdfstring{在bsp\+\_\+led.\+h中添加所使用的宏定义和函数声明}{在bsp\+\_\+led.\+h中添加所使用的宏定义和函数声明}}\label{md__r_e_a_d_m_e_autotoc_md2}

\begin{DoxyCode}{0}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#ifndef\ \_\_BSP\_LED\_H}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ \_\_BSP\_LED\_H}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/*\ Includes\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{stm32f10x_8h}{stm32f10x.h}}"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ LED\_B\_GPIO\_PIN\ GPIO\_Pin\_1\ }}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ LED\_B\_GPIO\_PORT\ GPIOB\ }}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ LED\_B\_GPIO\_CLK\ RCC\_APB2Periph\_GPIOB\ }}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ ON\ 1\ }}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ OFF\ 0\ }}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ 参数为1时IO口输出低电平，灯亮；参数为0时IO口输出高电平，灯灭}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ LED\_B(a)\ if\ (a)\(\backslash\)}}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIO\_ResetBits(LED\_B\_GPIO\_PORT,\ LED\_B\_GPIO\_PIN);\ \(\backslash\)}}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ else\(\backslash\)}}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIO\_SetBits(LED\_B\_GPIO\_PORT,\ LED\_B\_GPIO\_PIN);}}
\DoxyCodeLine{\textcolor{comment}{//\ 使用\(\backslash\)可以进行换行，其后不能跟空格，\(\backslash\)后应该直接回车}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ \mbox{\hyperlink{bsp__led_8c_a89d2c2ccc2981f0583aa6e4c8f043298}{LED\_GPIO\_Config}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ !\_\_BSP\_LED\_H}}

\end{DoxyCode}
\hypertarget{md__r_e_a_d_m_e_autotoc_md3}{}\doxysection{\texorpdfstring{在bsp\+\_\+led.\+c中添加初始化函数}{在bsp\+\_\+led.\+c中添加初始化函数}}\label{md__r_e_a_d_m_e_autotoc_md3}

\begin{DoxyCode}{0}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/*\ Includes\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bsp__led_8h}{bsp\_led.h}}"{}}\ \textcolor{comment}{//\ bsp:\ board\ support\ package\ 板级支持包}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ \mbox{\hyperlink{bsp__led_8c_a89d2c2ccc2981f0583aa6e4c8f043298}{LED\_GPIO\_Config}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___r_c_c___exported___functions_ga56ff55caf8d835351916b40dd030bc87}{RCC\_APB2PeriphClockCmd}}(\mbox{\hyperlink{bsp__led_8h_aacd5d3ad4cda06dd81696595f27d0ebe}{LED\_B\_GPIO\_CLK}},\ ENABLE);\ \textcolor{comment}{//\ 使能PB端口时钟}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{struct_g_p_i_o___init_type_def}{GPIO\_InitTypeDef}}\ GPIO\_InitStruct;\ \textcolor{comment}{//\ 定义GPIO初始化结构体变量}}
\DoxyCodeLine{\ \ \ \ GPIO\_InitStruct.\mbox{\hyperlink{struct_g_p_i_o___init_type_def_a35fc26fc58226126c5b99478a472e5e9}{GPIO\_Pin}}\ =\ \mbox{\hyperlink{bsp__led_8h_a545d2d051430cb7a8b36ee0287f0a1a4}{LED\_B\_GPIO\_PIN}};\ \textcolor{comment}{//\ 1端口}}
\DoxyCodeLine{\ \ \ \ GPIO\_InitStruct.\mbox{\hyperlink{struct_g_p_i_o___init_type_def_a55bd77e335c2bfeec9caa5dc922b791b}{GPIO\_Mode}}\ =\ GPIO\_Mode\_Out\_PP;\ \textcolor{comment}{//\ 推挽输出模式}}
\DoxyCodeLine{\ \ \ \ GPIO\_InitStruct.\mbox{\hyperlink{struct_g_p_i_o___init_type_def_ac05832cacebc861a9acf5294d702c16b}{GPIO\_Speed}}\ =\ GPIO\_Speed\_50MHz;\ \textcolor{comment}{//\ 速度50MHz}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___g_p_i_o___exported___functions_ga71abf9404261370d03cca449b88d3a65}{GPIO\_Init}}(\mbox{\hyperlink{bsp__led_8h_abca73237ab89db1d8c9d4481e17e6be1}{LED\_B\_GPIO\_PORT}},\ \&GPIO\_InitStruct);\ \textcolor{comment}{//\ 初始化PB1}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__r_e_a_d_m_e_autotoc_md4}{}\doxysection{\texorpdfstring{在main.\+c中调用初始化函数，并进行软件延时，实现\+LED闪烁}{在main.\+c中调用初始化函数，并进行软件延时，实现\+LED闪烁}}\label{md__r_e_a_d_m_e_autotoc_md4}

\begin{DoxyCode}{0}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/*\ Includes\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bsp__led_8h}{bsp\_led.h}}"{}}\ \textcolor{comment}{//\ bsp:\ board\ support\ package\ 板级支持包}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ \mbox{\hyperlink{bsp__led_8c_a89d2c2ccc2981f0583aa6e4c8f043298}{LED\_GPIO\_Config}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___r_c_c___exported___functions_ga56ff55caf8d835351916b40dd030bc87}{RCC\_APB2PeriphClockCmd}}(\mbox{\hyperlink{bsp__led_8h_aacd5d3ad4cda06dd81696595f27d0ebe}{LED\_B\_GPIO\_CLK}},\ ENABLE);\ \textcolor{comment}{//\ 使能PB端口时钟}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{struct_g_p_i_o___init_type_def}{GPIO\_InitTypeDef}}\ GPIO\_InitStruct;\ \textcolor{comment}{//\ 定义GPIO初始化结构体变量}}
\DoxyCodeLine{\ \ \ \ GPIO\_InitStruct.\mbox{\hyperlink{struct_g_p_i_o___init_type_def_a35fc26fc58226126c5b99478a472e5e9}{GPIO\_Pin}}\ =\ \mbox{\hyperlink{bsp__led_8h_a545d2d051430cb7a8b36ee0287f0a1a4}{LED\_B\_GPIO\_PIN}};\ \textcolor{comment}{//\ 1端口}}
\DoxyCodeLine{\ \ \ \ GPIO\_InitStruct.\mbox{\hyperlink{struct_g_p_i_o___init_type_def_a55bd77e335c2bfeec9caa5dc922b791b}{GPIO\_Mode}}\ =\ GPIO\_Mode\_Out\_PP;\ \textcolor{comment}{//\ 推挽输出模式}}
\DoxyCodeLine{\ \ \ \ GPIO\_InitStruct.\mbox{\hyperlink{struct_g_p_i_o___init_type_def_ac05832cacebc861a9acf5294d702c16b}{GPIO\_Speed}}\ =\ GPIO\_Speed\_50MHz;\ \textcolor{comment}{//\ 速度50MHz}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___g_p_i_o___exported___functions_ga71abf9404261370d03cca449b88d3a65}{GPIO\_Init}}(\mbox{\hyperlink{bsp__led_8h_abca73237ab89db1d8c9d4481e17e6be1}{LED\_B\_GPIO\_PORT}},\ \&GPIO\_InitStruct);\ \textcolor{comment}{//\ 初始化PB1}}
\DoxyCodeLine{\}}

\end{DoxyCode}
 