\doxysection{E\+:/\+Personal/\+IT/\+Embedded/\+Stm32/\+Fire/\+Fire-\/\+Projects/12-\/\+GPIO输出-\/使用固件库点亮\+LED/\+Libraries/\+STM32\+F10x\+\_\+\+Std\+Periph\+\_\+\+Driver/src/stm32f10x\+\_\+can.c File Reference}
\hypertarget{stm32f10x__can_8c}{}\label{stm32f10x__can_8c}\index{E:/Personal/IT/Embedded/Stm32/Fire/Fire-\/Projects/12-\/GPIO输出-\/使用固件库点亮LED/Libraries/STM32F10x\_StdPeriph\_Driver/src/stm32f10x\_can.c@{E:/Personal/IT/Embedded/Stm32/Fire/Fire-\/Projects/12-\/GPIO输出-\/使用固件库点亮LED/Libraries/STM32F10x\_StdPeriph\_Driver/src/stm32f10x\_can.c}}


This file provides all the CAN firmware functions.  


{\ttfamily \#include "{}stm32f10x\+\_\+can.\+h"{}}\newline
{\ttfamily \#include "{}stm32f10x\+\_\+rcc.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries MCR\+\_\+\+DBF}~((uint32\+\_\+t)0x00010000) /\texorpdfstring{$\ast$}{*} software master reset \texorpdfstring{$\ast$}{*}/
\item 
\#define {\bfseries TMIDx\+R\+\_\+\+TXRQ}~((uint32\+\_\+t)0x00000001) /\texorpdfstring{$\ast$}{*} Transmit mailbox request \texorpdfstring{$\ast$}{*}/
\item 
\#define {\bfseries FMR\+\_\+\+FINIT}~((uint32\+\_\+t)0x00000001) /\texorpdfstring{$\ast$}{*} Filter init mode \texorpdfstring{$\ast$}{*}/
\item 
\#define {\bfseries INAK\+\_\+\+TIMEOUT}~((uint32\+\_\+t)0x0000\+FFFF)
\item 
\#define {\bfseries SLAK\+\_\+\+TIMEOUT}~((uint32\+\_\+t)0x0000\+FFFF)
\item 
\#define {\bfseries CAN\+\_\+\+FLAGS\+\_\+\+TSR}~((uint32\+\_\+t)0x08000000)
\item 
\#define {\bfseries CAN\+\_\+\+FLAGS\+\_\+\+RF1R}~((uint32\+\_\+t)0x04000000)
\item 
\#define {\bfseries CAN\+\_\+\+FLAGS\+\_\+\+RF0R}~((uint32\+\_\+t)0x02000000)
\item 
\#define {\bfseries CAN\+\_\+\+FLAGS\+\_\+\+MSR}~((uint32\+\_\+t)0x01000000)
\item 
\#define {\bfseries CAN\+\_\+\+FLAGS\+\_\+\+ESR}~((uint32\+\_\+t)0x00\+F00000)
\item 
\#define {\bfseries CAN\+\_\+\+TXMAILBOX\+\_\+0}~((uint8\+\_\+t)0x00)
\item 
\#define {\bfseries CAN\+\_\+\+TXMAILBOX\+\_\+1}~((uint8\+\_\+t)0x01)
\item 
\#define {\bfseries CAN\+\_\+\+TXMAILBOX\+\_\+2}~((uint8\+\_\+t)0x02)
\item 
\#define {\bfseries CAN\+\_\+\+MODE\+\_\+\+MASK}~((uint32\+\_\+t) 0x00000003)
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga002b74cd69574a14b17ad445090245cd}{CAN\+\_\+\+De\+Init}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx)
\begin{DoxyCompactList}\small\item\em Deinitializes the CAN peripheral registers to their default reset values. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga9023c35a9ab931ad4513fc5d19b4bd6c}{CAN\+\_\+\+Init}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, \mbox{\hyperlink{struct_c_a_n___init_type_def}{CAN\+\_\+\+Init\+Type\+Def}} \texorpdfstring{$\ast$}{*}CAN\+\_\+\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Initializes the CAN peripheral according to the specified parameters in the CAN\+\_\+\+Init\+Struct. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga39476830280340363c51041be6b12647}{CAN\+\_\+\+Filter\+Init}} (\mbox{\hyperlink{struct_c_a_n___filter_init_type_def}{CAN\+\_\+\+Filter\+Init\+Type\+Def}} \texorpdfstring{$\ast$}{*}CAN\+\_\+\+Filter\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Initializes the CAN peripheral according to the specified parameters in the CAN\+\_\+\+Filter\+Init\+Struct. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_gad77ad810868ed111755fc9e8ae0c7646}{CAN\+\_\+\+Struct\+Init}} (\mbox{\hyperlink{struct_c_a_n___init_type_def}{CAN\+\_\+\+Init\+Type\+Def}} \texorpdfstring{$\ast$}{*}CAN\+\_\+\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Fills each CAN\+\_\+\+Init\+Struct member with its default value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga109ff8960bc59f44b984c9646f17b3c0}{CAN\+\_\+\+Slave\+Start\+Bank}} (uint8\+\_\+t CAN\+\_\+\+Bank\+Number)
\begin{DoxyCompactList}\small\item\em Select the start bank filter for slave CAN. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_gac0e2d33e08caf49d1f1251f0dcc20213}{CAN\+\_\+\+DBGFreeze}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the DBG Freeze for CAN. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga94740177bab153ca5b102d122f9a8cca}{CAN\+\_\+\+TTCom\+Mode\+Cmd}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disabes the CAN Time Trigger\+Operation communication mode. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_gaccfcb81f76f58400077c7b2d8641dd83}{CAN\+\_\+\+Transmit}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, \mbox{\hyperlink{struct_can_tx_msg}{Can\+Tx\+Msg}} \texorpdfstring{$\ast$}{*}Tx\+Message)
\begin{DoxyCompactList}\small\item\em Initiates the transmission of a message. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga68ab05a0a6cdfcc2b6f6b6b2c10848e2}{CAN\+\_\+\+Transmit\+Status}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint8\+\_\+t Transmit\+Mailbox)
\begin{DoxyCompactList}\small\item\em Checks the transmission of a message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga81106cdf5395a1947bfc87ec1685829e}{CAN\+\_\+\+Cancel\+Transmit}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint8\+\_\+t Mailbox)
\begin{DoxyCompactList}\small\item\em Cancels a transmit request. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga351b90bb8a3bb0c846f85bbd56ef4dc8}{CAN\+\_\+\+Receive}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint8\+\_\+t FIFONumber, \mbox{\hyperlink{struct_can_rx_msg}{Can\+Rx\+Msg}} \texorpdfstring{$\ast$}{*}Rx\+Message)
\begin{DoxyCompactList}\small\item\em Receives a message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga1bc3b39471e579b4101624c33d27918b}{CAN\+\_\+\+FIFORelease}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint8\+\_\+t FIFONumber)
\begin{DoxyCompactList}\small\item\em Releases the specified FIFO. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga7100459a95ce1b3cfe8ab15e112029fe}{CAN\+\_\+\+Message\+Pending}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint8\+\_\+t FIFONumber)
\begin{DoxyCompactList}\small\item\em Returns the number of pending messages. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_gab2a3630e9e3024114eb117d14e514208}{CAN\+\_\+\+Operating\+Mode\+Request}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint8\+\_\+t CAN\+\_\+\+Operating\+Mode)
\begin{DoxyCompactList}\small\item\em Select the CAN Operation mode. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga640215e38765759d7eceb8a039046667}{CAN\+\_\+\+Sleep}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx)
\begin{DoxyCompactList}\small\item\em Enters the low power mode. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga78cdfbf1884b9e33c552bcbca15bed10}{CAN\+\_\+\+Wake\+Up}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx)
\begin{DoxyCompactList}\small\item\em Wakes the CAN up. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_gaaee721a392b6b21bfd15dc160aeb6924}{CAN\+\_\+\+Get\+Last\+Error\+Code}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx)
\begin{DoxyCompactList}\small\item\em Returns the CANx\textquotesingle{}s last error code (LEC). \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga6903eecbec40eb1361d915ddde9a3274}{CAN\+\_\+\+Get\+Receive\+Error\+Counter}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx)
\begin{DoxyCompactList}\small\item\em Returns the CANx Receive Error Counter (REC). \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga85ee0c35bf7ca15d4e4c862eef534843}{CAN\+\_\+\+Get\+LSBTransmit\+Error\+Counter}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx)
\begin{DoxyCompactList}\small\item\em Returns the LSB of the 9-\/bit CANx Transmit Error Counter(\+TEC). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_gad1a8b2499a780b5bfa4accb3597b02f4}{CAN\+\_\+\+ITConfig}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint32\+\_\+t CAN\+\_\+\+IT, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the specified CANx interrupts. \end{DoxyCompactList}\item 
Flag\+Status \mbox{\hyperlink{group___c_a_n___private___functions_ga2faad96caf823ef463cc5b5b25c480bb}{CAN\+\_\+\+Get\+Flag\+Status}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint32\+\_\+t CAN\+\_\+\+FLAG)
\begin{DoxyCompactList}\small\item\em Checks whether the specified CAN flag is set or not. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga2c01646d5d3a2d7045e8dd71f58f8742}{CAN\+\_\+\+Clear\+Flag}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint32\+\_\+t CAN\+\_\+\+FLAG)
\begin{DoxyCompactList}\small\item\em Clears the CAN\textquotesingle{}s pending flags. \end{DoxyCompactList}\item 
ITStatus \mbox{\hyperlink{group___c_a_n___private___functions_ga9aca05b3013e1b3438f3559f80b33c82}{CAN\+\_\+\+Get\+ITStatus}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint32\+\_\+t CAN\+\_\+\+IT)
\begin{DoxyCompactList}\small\item\em Checks whether the specified CANx interrupt has occurred or not. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga30bf7ac0c1793f6622a4a1adbb7dbc8a}{CAN\+\_\+\+Clear\+ITPending\+Bit}} (\mbox{\hyperlink{struct_c_a_n___type_def}{CAN\+\_\+\+Type\+Def}} \texorpdfstring{$\ast$}{*}CANx, uint32\+\_\+t CAN\+\_\+\+IT)
\begin{DoxyCompactList}\small\item\em Clears the CANx\textquotesingle{}s interrupt pending bits. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file provides all the CAN firmware functions. 

\begin{DoxyAuthor}{Author}
MCD Application Team 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
V3.\+5.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
11-\/March-\/2011 
\end{DoxyDate}
\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME. AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE CONTENT OF SUCH FIRMWARE AND/\+OR THE USE MADE BY CUSTOMERS OF THE CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.

\doxysubsubsection*{\begin{center}\copyright{} COPYRIGHT 2011 STMicroelectronics\end{center} }